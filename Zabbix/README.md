# Мониторинг с помощью Zabbix 

## Задача

Установить и сконфигурировать Zabbix для отправки алертов в Telegram-канал по результатам проверки значений метрик, сформированных скриптом.

## Решение
Скрипт генерирует метрики и сохраняет их в формате json для дальнейшего вычленения с помощью LLD-макросов. Скрип запускается по cron-у каждую минуту. Zabbix получает данные из файла с помощью правила обнаружения, затем, с использованием прототипов, формируются айтемы и триггеры. Триггер настроен на оповещения по заданному условию (>=95).

##### 1. Генерация метрик
Скрипт, генерирующий метрики, приложен. Ниже - внешний вид генерируемого скриптом json-а.

![metrics.json](images/generated.JPG)

##### 2. Настройка обнаружения метрик в Zabbix
Метрики обнаружениваются автоматически через discovery rule. Айтемы и триггеры формируются по прототипам внутри discovery rule.

![dicovery rule](images/discovery1.JPG)
![dicovery rule](images/discovery2.JPG)
![item prototype](images/item1.JPG)
![items](images/item2.JPG)
![trigger prototype](images/trigger1.JPG)
![triggers](images/trigger2.JPG)

##### 3. Графики метрик

![graph1](images/metric1.JPG)
![graph2](images/metric2.JPG)
![graph3](images/metric3.JPG)

##### 4. Настройка уведомлений в Telegram
Создан пользователь, которому добавлен Telegram в медиа, в медиа-тип добавлен токен бота, создан экшн.

![message](images/message.JPG)

